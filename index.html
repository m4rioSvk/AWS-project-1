<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Tubes Cursor</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <canvas id="canvas"></canvas>
    <div class="hero">
      <h1>Tubes</h1>
      <h2>Cursor</h2>
      <a target="_blank" href="https://www.framer.com/marketplace/components/tubes-cursor/">Framer Component</a>
    </div>
  </div>

  <!-- ONLY ONE SCRIPT: Full module import -->
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.module.js';
    import TubesCursor from 'https://cdn.jsdelivr.net/npm/threejs-components@0.0.19/build/cursors/tubes1.min.js';

    window.addEventListener('load', () => {
      const canvas = document.getElementById('canvas');
      if (!canvas) {
        console.error("Canvas not found! Add <canvas id='canvas'>");
        return;
      }

      const app = TubesCursor(canvas, {
        tubes: {
          colors: ["#f967fb", "#53bc28", "#6958d5"],
          lights: {
            intensity: 200,
            colors: ["#83f36e", "#fe8a2e", "#ff008a", "#60aed5"]
          }
        }
      });

      document.body.addEventListener('click', () => {
        const colors = randomColors(3);
        const lightsColors = randomColors(4);
        console.log("New colors:", colors, lightsColors);
        app.tubes.setColors(colors);
        app.tubes.setLightsColors(lightsColors);
      });

      function randomColors(count) {
        return new Array(count)
          .fill(0)
          .map(() => "#" + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0'));
      }

      console.log("TubesCursor initialized!");
    });
  </script>
</body>
</html>